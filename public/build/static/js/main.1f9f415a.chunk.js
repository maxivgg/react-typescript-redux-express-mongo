(this.webpackJsonppublic=this.webpackJsonppublic||[]).push([[0],{78:function(t,e,n){},99:function(t,e,n){"use strict";n.r(e);var c=n(6),r=n(0),a=n(8),o=n.n(a),i=n(15),s=n(20),u=n(57),l=n(58),j=n(14),d="FETCH_POSTS",p="DELETE_POST",b="ADD_POST",O="EDIT_POST",f="UPDATE_POST",h="SHOW_FORM",x={posts:[],postEdit:null,showForm:!1};var y=Object(s.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return Object(j.a)(Object(j.a)({},t),{},{posts:e.payload});case b:return Object(j.a)(Object(j.a)({},t),{},{posts:[].concat(Object(l.a)(t.posts),[e.payload])});case O:return Object(j.a)(Object(j.a)({},t),{},{postEdit:e.payload});case f:return Object(j.a)(Object(j.a)({},t),{},{postEdit:null,posts:t.posts.map((function(t){return t._id===e.payload._id&&(t.title=e.payload.title,t.body=e.payload.body),t}))});case p:return Object(j.a)(Object(j.a)({},t),{},{posts:t.posts.filter((function(t){return t._id!==e.meta._id}))});case h:return Object(j.a)(Object(j.a)({},t),{},{showForm:!t.showForm});default:return t}}}),v=[u.a],m=Object(s.e)(y,Object(s.d)(s.a.apply(void 0,v))),g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))},w=(n(78),n(17)),_=n.n(w),E=n(32),S=n(33),T=n.n(S),k="localhost"===window.location.hostname?"http://localhost:2000/api/posts":"https://app-react-express-mongo.herokuapp.com/api/posts",C=function(){return{type:h}},F=n(132),P=n(136),A=n(142);function D(t){var e=t.post,n=e._id,r=e.title,a=e.body,o=Object(i.b)(),s=function(t){o(function(t){return function(){var e=Object(E.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete(k+"/"+t).then((function(e){return n({type:p,meta:{_id:t}})})).catch((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))},u=function(t){o(function(t){return{type:O,payload:t}}(t)),o(C())};return Object(c.jsxs)(F.a,{children:[Object(c.jsx)(P.a,{children:r}),Object(c.jsx)(P.a,{children:a}),Object(c.jsxs)(P.a,{children:[Object(c.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){return u(t.post)},children:"edit"}),Object(c.jsx)(A.a,{variant:"contained",color:"secondary",onClick:function(){return s(n)},children:"delete"})]})]})}var B=n(138),I=n(140),L=n(137),H=n(139),J=n(39),M=n(141),N=n(143);function R(){var t=Object(r.useState)(""),e=Object(J.a)(t,2),n=e[0],a=e[1],o=Object(r.useState)(""),s=Object(J.a)(o,2),u=s[0],l=s[1],j=Object(r.useState)(""),d=Object(J.a)(j,2),p=d[0],O=d[1],h=Object(i.b)(),x=Object(i.c)((function(t){return t.posts.postEdit})),y=function(){var t;n?h((t={_id:n,title:u,body:p},function(){var e=Object(E.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.put(k+"/"+t._id,t).then((function(e){return n({type:f,payload:t})})).catch((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(a(Object(N.a)()),h(function(t){return function(){var e=Object(E.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(k,t).then((function(t){return n({type:b,payload:t.data})})).catch((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({_id:n,title:u,body:p}))),a(""),l(""),O(""),h(C())};return Object(r.useEffect)((function(){return x&&(a(x._id),l(x.title),O(x.body)),function(){}}),[x]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:""!==n?"Edit post":"Add new post"}),Object(c.jsx)(M.a,{label:"Title",variant:"outlined",name:"title",value:u,onChange:function(t){return l(t.target.value)}}),Object(c.jsx)(M.a,{label:"Body",variant:"outlined",name:"body",value:p,onChange:function(t){return O(t.target.value)}}),Object(c.jsx)(A.a,{variant:"contained",color:"primary",type:"submit",value:"Submit",onClick:function(){return y()},children:"Submit"})]})}function U(){var t=Object(i.c)((function(t){return t.posts.posts})),e=Object(i.c)((function(t){return t.posts.showForm})),n=Object(i.b)();return Object(r.useEffect)((function(){n(function(){var t=Object(E.a)(_.a.mark((function t(e){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get(k).then((function(t){return e({type:d,payload:t.data})})).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[n]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Posts"}),e?Object(c.jsx)(R,{}):Object(c.jsxs)("div",{children:[Object(c.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){n(C())},children:"Add post"}),Object(c.jsx)(L.a,{children:Object(c.jsxs)(B.a,{children:[Object(c.jsx)(H.a,{children:Object(c.jsxs)(F.a,{children:[Object(c.jsx)(P.a,{children:"Title"}),Object(c.jsx)(P.a,{children:"Body"}),Object(c.jsx)(P.a,{children:"Actions"})]})}),Object(c.jsx)(I.a,{children:t.map((function(t,e){return Object(c.jsx)(D,{post:t},e)}))})]})})]})]})}var W=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(U,{})})},q=document.getElementById("root");o.a.render(Object(c.jsx)(i.a,{store:m,children:Object(c.jsx)(W,{})}),q),g()}},[[99,1,2]]]);
//# sourceMappingURL=main.1f9f415a.chunk.js.map